(function($){$.fn.yxMobileSlider=function(r){var t={width:640,height:320,during:5000,speed:30};r=$.extend(true,{},t,r);return this.each(function(){var c=$(this),s=r;var d=0,startY=0;var f;var g=0;var h=null;var j=$("ul",c);var k=$("li",j);var m=k.length;var n={};var o=s.width;c.width(s.width).height(s.height).css({position:'relative',overflow:'hidden',margin:'0 auto'});j.css({position:'absolute',left:0});k.css({float:'left',display:'inline'});$("img",k).css({width:'100%',height:'100%'});c.append('<div class="focus"><div></div></div>');var p=$(".focus");for(var i=0;i<m;i++){$("div",p).append("<span></span>")}var q=$("span",p);p.css({minHeight:$(p).find('span').height()*2,position:'absolute',bottom:0,background:'rgba(0,0,0,0.5)'});$("span",p).css({display:'block',float:'left',cursor:'pointer'});$("div",p).width(q.outerWidth(true)*m).css({position:'absolute',right:10,top:'50%',marginTop:-$(this).find('span').width()/2});q.first().addClass("current");$(window).bind('resize load',function(){if(isMobile()){mobileSettings();bindTouchEvent()}k.width(c.width()).height(c.height());j.width(m*k.width());p.width(c.width()).height(c.height()*0.15).css({zIndex:2});c.fadeIn(300)});autoMove();if(!isMobile()){q.hover(function(){g=$(this).index()-1;stopMove();doMove()},function(){autoMove()})}function autoMove(){h=setInterval(doMove,s.during)}function stopMove(){clearInterval(h)}function doMove(){g=g>=m-1?0:g+1;doAnimate(-o*g);q.eq(g).addClass("current").siblings().removeClass("current")}function bindTouchEvent(){j.get(0).addEventListener('touchstart',touchStartFunc,false);j.get(0).addEventListener('touchmove',touchMoveFunc,false);j.get(0).addEventListener('touchend',touchEndFunc,false)}function touchPos(e){var a=e.changedTouches,l=a.length,touch,tagX,tagY;for(var i=0;i<l;i++){touch=a[i];tagX=touch.clientX;tagY=touch.clientY}n.x=tagX;n.y=tagY;return n}function touchStartFunc(e){clearInterval(h);touchPos(e);d=n.x;startY=n.y;f=j.position().left}function touchMoveFunc(e){touchPos(e);var a=n.x-d;var b=n.y-startY;if(Math.abs(b)<Math.abs(a)){e.preventDefault();j.css({left:f+a})}}function touchEndFunc(e){touchPos(e);var a=n.x-d;var b=n.y-startY;if(Math.abs(b)<Math.abs(a)){if(a>0){g--;if(g>=0){var a=g*o;doAnimate(-a,autoMove)}else{doAnimate(0,autoMove);g=0}}else{g++;if(g<m&&g>=0){var a=g*o;doAnimate(-a,autoMove)}else{g=m-1;doAnimate(-(m-1)*o,autoMove)}}q.eq(g).addClass("current").siblings().removeClass("current")}}function mobileSettings(){o=$(window).width();var a=$(window).width()/s.width;c.height(s.height*a).width($(window).width());j.css({left:-g*o})}function doAnimate(a,b){j.stop().animate({left:a},c.speed,function(){if(b)b()})}function isMobile(){if(navigator.userAgent.match(/Android/i)||navigator.userAgent.indexOf('iPhone')!=-1||navigator.userAgent.indexOf('iPod')!=-1||navigator.userAgent.indexOf('iPad')!=-1){return true}else{return false}}})}})(jQuery);