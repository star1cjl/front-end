<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no">
    <title>结算汇总</title>
    <link rel="stylesheet" type="text/css" href="css/weui.min.css">
    <link rel="stylesheet" type="text/css" href="css/mobiscroll.custom-2.17.1.min.css">
    <link rel="stylesheet" type="text/css" href="css/wxbase.css">
    <script type="text/html" id="tpl_sttlmnt_smmry">
        <div class="settle_wrap">
            <div class="settle_header weui_cell">
                <div class="weui_cell_hd">
                    <label class="weui_label" style="width: 50px;">卡号</label>
                </div>
                <div class="weui_cell_bd weui_cell_primary">
                    1231435****234454
                </div>
            </div>
            <div class="total_wrap">
                <label class="xboss_label fs14">应付款 - 暂不付</label>
                <div class="weui_cells weui_cells_access">
                    <a class="weui_cell" href="javascript:;">
                        <div class="weui_cell_bd weui_cell_primary">
                            <p>
                                <b class="currency">￥</b>
                                <span>4000.00</span>
                            </p>
                        </div>
                        <div class="weui_cell_ft">详情</div>
                    </a>
                </div>
            </div>
            <div class="weui_grids">
                <div class="weui_grid">
                    <p class="weui_grid_label">消费结算</p>
                </div>
                <div class="weui_grid">
                    <p class="weui_grid_label">差错</p>
                </div>
                <div class="weui_grid">
                    <p class="weui_grid_label">月租</p>
                </div>
                <div class="weui_grid">
                    <p class="weui_grid_label">冻结/解冻</p>
                </div>
            </div>
            <div class="weui_grids">
                <div class="weui_grid">
                    <p class="weui_grid_label">￥4000.00</p>
                </div>
                <div class="weui_grid">
                    <p class="weui_grid_label">￥100.00</p>
                </div>
                <div class="weui_grid">
                    <p class="weui_grid_label">￥-100.00</p>
                </div>
                <div class="weui_grid">
                    <p class="weui_grid_label">￥0.00</p>
                </div>
            </div>
        </div>
    </script>
    <script type="text/javascript" src="js/jquery-1.12.4.min.js"></script>
    <script type="text/javascript" src="js/mobiscroll.custom-2.17.1.min.js"></script>
    <script type="text/javascript" src="js/util.js"></script>
</head>

<body>
    <div class="weui_cells weui_cells_access x_header">
        <a class="weui_cell" href="javascript:;">
            <div id="prevDay" class="weui_cell_ft"></div>
            <div class="weui_cell_bd weui_cell_primary">
                <p id="sttlDate" class="select_date tc"></p>
            </div>
            <div id="nextDay" class="weui_cell_ft"></div>
        </a>
    </div>
    <div id="sttlDataWrap">
        <div class="settle_wrap">
            <div class="settle_header weui_cell">
                <div class="weui_cell_hd">
                    <label class="weui_label card_icon"></label>
                    <label class="weui_label w-auto">卡号</label>
                </div>
                <div class="weui_cell_bd weui_cell_primary tr">
                    1231435****234454
                </div>
            </div>
            <div class="total_wrap">
                <label class="xboss_label fs14">应付款 - 暂不付</label>
                <div class="weui_cells weui_cells_access">
                    <a class="weui_cell" href="javascript:;">
                        <div class="weui_cell_bd weui_cell_primary">
                            <p class="tc">
                                <b class="currency">￥</b>
                                <span>4000.00</span>
                            </p>
                        </div>
                    </a>
                    <a class="detail_link weui_cell fr" href="javascript:;">
                        <div class="weui_cell_ft">详情</div>
                    </a>
                </div>
            </div>
            <div class="row_header weui_grids">
                <div class="weui_grid">
                    <p class="weui_grid_label">消费结算</p>
                </div>
                <div class="weui_grid">
                    <p class="weui_grid_label">差错</p>
                </div>
                <div class="weui_grid">
                    <p class="weui_grid_label">月租</p>
                </div>
                <div class="weui_grid">
                    <p class="weui_grid_label">冻结/解冻</p>
                </div>
            </div>
            <div class="weui_grids">
                <div class="weui_grid">
                    <p class="weui_grid_label"><span class="dot"></span>￥4000.00</p>
                </div>
                <div class="weui_grid">
                    <p class="weui_grid_label"><span class="dot"></span>￥100.00</p>
                </div>
                <div class="weui_grid">
                    <p class="weui_grid_label"><span class="dot"></span>￥-100.00</p>
                </div>
                <div class="weui_grid">
                    <p class="weui_grid_label"><span class="dot"></span>￥0.00</p>
                </div>
            </div>
        </div>
        <div class="settle_wrap">
            <div class="settle_header weui_cell">
                <div class="weui_cell_hd">
                    <label class="weui_label card_icon"></label>
                    <label class="weui_label">卡号</label>
                </div>
                <div class="weui_cell_bd weui_cell_primary tr">
                    1231435****234454
                </div>
            </div>
            <div class="total_wrap">
                <label class="xboss_label fs14">应付款 - 暂不付</label>
                <div class="weui_cells weui_cells_access">
                    <a class="weui_cell" href="javascript:;">
                        <div class="weui_cell_bd weui_cell_primary">
                            <p class="tc">
                                <b class="currency">￥</b>
                                <span>4000.00</span>
                            </p>
                        </div>
                    </a>
                    <a class="detail_link weui_cell fr" href="settle_flow.html">
                        <div class="weui_cell_ft">详情</div>
                    </a>
                </div>
            </div>
            <div class="row_header weui_grids">
                <div class="weui_grid">
                    <p class="weui_grid_label">消费结算</p>
                </div>
                <div class="weui_grid">
                    <p class="weui_grid_label">差错</p>
                </div>
                <div class="weui_grid">
                    <p class="weui_grid_label">月租</p>
                </div>
                <div class="weui_grid">
                    <p class="weui_grid_label">冻结/解冻</p>
                </div>
            </div>
            <div class="weui_grids">
                <div class="weui_grid">
                    <p class="weui_grid_label"><span class="dot"></span>￥4000.00</p>
                </div>
                <div class="weui_grid">
                    <p class="weui_grid_label"><span class="dot"></span>￥100.00</p>
                </div>
                <div class="weui_grid">
                    <p class="weui_grid_label"><span class="dot"></span>￥-100.00</p>
                </div>
                <div class="weui_grid">
                    <p class="weui_grid_label"><span class="dot"></span>￥0.00</p>
                </div>
            </div>
        </div>
        <div class="settle_wrap">
            <div class="settle_header weui_cell">
                <div class="weui_cell_hd">
                    <label class="weui_label card_icon"></label>
                    <label class="weui_label">卡号</label>
                </div>
                <div class="weui_cell_bd weui_cell_primary tr">
                    1231435****234454
                </div>
            </div>
            <div class="total_wrap">
                <label class="xboss_label fs14">应付款 - 暂不付</label>
                <div class="weui_cells weui_cells_access">
                    <a class="weui_cell" href="javascript:;">
                        <div class="weui_cell_bd weui_cell_primary">
                            <p class="tc">
                                <b class="currency">￥</b>
                                <span>4000.00</span>
                            </p>
                        </div>
                    </a>
                    <a class="detail_link weui_cell fr" href="javascript:;">
                        <div class="weui_cell_ft">详情</div>
                    </a>
                </div>
            </div>
            <div class="row_header weui_grids">
                <div class="weui_grid">
                    <p class="weui_grid_label">消费结算</p>
                </div>
                <div class="weui_grid">
                    <p class="weui_grid_label">差错</p>
                </div>
                <div class="weui_grid">
                    <p class="weui_grid_label">月租</p>
                </div>
                <div class="weui_grid">
                    <p class="weui_grid_label">冻结/解冻</p>
                </div>
            </div>
            <div class="weui_grids">
                <div class="weui_grid">
                    <p class="weui_grid_label">￥4000.00</p>
                </div>
                <div class="weui_grid">
                    <p class="weui_grid_label">￥100.00</p>
                </div>
                <div class="weui_grid">
                    <p class="weui_grid_label">￥-100.00</p>
                </div>
                <div class="weui_grid">
                    <p class="weui_grid_label">￥0.00</p>
                </div>
            </div>
        </div>
    </div>
    <div class="no_data">
        <div class="none_img"></div>
        <p class="tc">暂无结算汇总记录</p>
    </div>
    <script type="text/javascript">
    console.log(window.location.hash);

    $(document).ready(function() {
        var maxDate = new Date();
        //maxDate = new Date(maxDate.getTime() - 24 * 60 * 60 * 1000);

        var pDate = window.location.hash.substring(1);
        pDate = pDate && new Date(pDate.replace(/-/g, "/"));
        $("#sttlDate").text((pDate || maxDate).format());

        var opts = {
            lang: 'zh',
            display: 'top',
            mode: 'scroller',
            dateFormat: 'yyyy-mm-dd',
            defaultValue: pDate || maxDate,
            maxDate: new Date(),
            onSelect: function(valueText, inst) {
                $('#sttlDate').text(valueText);
                allsumQuery({
                    settleDateBegin: valueText,
                    settleDateEnd: valueText
                });
            }
        };
        $('#sttlDate').mobiscroll().calendar(opts);

        $("#prevDay, #nextDay").on(EV, function() {
            var qDate = new Date($("#sttlDate").text());
            var sign = $(this).attr("id") == "prevDay" ? -1 : 1;
            qDate = new Date(qDate.getTime() + sign * 24 * 60 * 60 * 1000);
            if (qDate > maxDate) return false;
            $("#sttlDate").text(qDate.format());
            $('#sttlDate').mobiscroll("setValue", qDate);
            /*            allsumQuery({
                            settleDateBegin: qDate.format(),
                            settleDateEnd: qDate.format()
                        });*/
        });

        $("#sttlDataWrap").on(EV, ".detail_link", function() {
            //window.localStorage["sttlDate"] = $("#sttlDate").mobiscroll("getValue");
            window.location.hash = $('#sttlDate').text();
        });

        /*        allsumQuery({
                    settleDateBegin: (pDate || maxDate).format(),
                    settleDateEnd: (pDate || maxDate).format()
                });*/
    });
    </script>
</body>

</html>
